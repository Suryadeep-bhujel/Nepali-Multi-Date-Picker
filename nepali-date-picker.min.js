(function(e){function t(){let t=N.length;if(t<1)e(".andp-datepicker-container").removeClass("open").hide();else{if(Y)T.attr("value",N[0]).val(N[0]);else{for(e('input.andp-hidden-dates[data-cal_id="'+m+'"]').remove(),i=0;i<=t-1;i++)p(N[i]);var a=N[0];1==T.data("show_all_dates")?a=N.join(", "):t>1&&(a=t+" dates selected"),T.attr("value",a).val(a)}e(".andp-datepicker-container").removeClass("open").hide(),selected_date=e(this).data("date"),e("document").trigger("andp_date_selected",[selected_date,v])}}function a(t){e(".andp-datepicker-container").removeClass("open").hide();var a=e('.andp-datepicker-container[data-cal_id="'+m+'"]');if(a.length>0)return E=a.find(".andp-year-select"),w=a.find(".andp-month-select"),C=a.find(".andp-days-numbers"),a.addClass("open").show(),void n();var l='<div class="andp-datepicker-container" data-cal_id="'+m+'" >';for(l+='<div class = "andp-header">',l+='<button type = "button"  class = "andp-prev andp-change-months"> &#10094; </button>',l+='<select class = "andp-month-select"> </select>',l+='<select class = "andp-year-select"> </select>',l+='<button type = "button" class = "andp-next andp-change-months"> &#10095; </button> ',l+="</div>",l+='<div class="andp-body">',l+='<div class = "andp-days-names"> <div> SUN </div> <div> MON </div> <div> TUE </div> <div> WED </div> <div> THU </div> <div> FRI </div> <div> SAT </div> </div>',l+='<div class = "andp-days-numbers"> </div>',Y||(control_key="mac"==x?"CMD":"CTRL",l+='<div class="andp-info" style="display:none"><i class="mdi mdi-information text-primary"></i> Press <strong>'+control_key+"</strong> or <strong>Shift</strong> key for multiple selection </div>"),l+='<div class="andp-action-btns">',l+='<button type="button" class="apply-date" data-cal_id="'+m+'">Apply</button>',l+="</div>",l+="</div>",l+="</div>",u.append(l),a=e('.andp-datepicker-container[data-cal_id="'+m+'"]'),E=a.find(".andp-year-select"),w=a.find(".andp-month-select"),C=a.find(".andp-days-numbers"),append_html='<option value = "1" '+("1"==D?"selected":" ")+" > Baisakh </option>",append_html+='<option value = "2" '+("2"==D?"selected":"")+" > Jestha </option>",append_html+='<option value = "3" '+("3"==D?"selected":"")+" > Asar </option>",append_html+='<option value = "4" '+("4"==D?"selected":"")+" > Shrawan </option>",append_html+='<option value = "5" '+("5"==D?"selected":"")+" > Bhadra </option>",append_html+='<option value = "6" '+("6"==D?"selected":"")+" > Ashoj </option>",append_html+='<option value = "7" '+("7"==D?"selected":"")+" > Kartik </option>",append_html+='<option value = "8" '+("8"==D?"selected":"")+" > Mangsir </option>",append_html+='<option value = "9" '+("9"==D?"selected":"")+" > Poush </option>",append_html+='<option value = "10" '+("10"==D?"selected":"")+" > Magh </option> ",append_html+='<option value = "11" '+("11"==D?"selected":"")+" > Falgun </option>",append_html+='<option value = "12" '+("12"==D?"selected":"")+" > Chaitra </option>",w.append(append_html),i=M;i<=k;i++)append_html='<option value="'+i+'"',i==y&&(append_html+=" selected"),append_html+=">"+i+"</option>",E.append(append_html);s(),e('.andp-datepicker-container[data-cal_id="'+m+'"]').addClass("open"),n()}function n(){var t=T.offset(),a=T.outerHeight(),n=e(window).width(),i=T.outerWidth(),s=e(".andp-datepicker-container").outerWidth();if(s+t.left+10>n){var l=n-(t.left+i);e('.andp-datepicker-container[data-cal_id="'+m+'"]').css({top:t.top+a,right:l,left:"inherit"})}else e('.andp-datepicker-container[data-cal_id="'+m+'"]').css({top:t.top+a,left:t.left,right:"inherit"})}function s(){month=w.val(),year=E.val(),C.html("");var e=new c;e.setNepaliDate(year,month,1);var t=e.getDay(),a=l(year,month);append_html="";var n=1,s=1,d=parseInt(t)-2,o=1;for(i=1;i<=42;i++){last_month=parseInt(month)-1,last_year=parseInt(year),last_month<1&&(last_month=12,last_year-=1,last_year<M&&(last_year=M,last_month=1)),next_month=parseInt(month)+1,next_year=parseInt(year);var h=l(last_year,last_month);if(1==n&&(append_html+='<div class="andp-column">'),i<t)append_html+='<div class="old-dates"> '+parseInt(h-d)+" </div>",d-=1;else if(s<=a){proper_date=year+"-"+month+"-"+s;var r=N.indexOf(proper_date);append_html+='<div class="day '+(r>=0?" selected":"")+'" data-date="'+proper_date+'">'+s+"</div>",s++}else append_html+='<div  class="old-dates"> '+o+"</div>",o++;7==n&&(append_html+="</div>",n=0),n++}C.append(append_html)}function l(e,t){var a=new c;if(!(e<M||e>k||t<1||t>12)){e=e-M,t=t-1;return a.nepaliMonths[e][t]}}function d(e,t){e=e.split("-"),t=t.split("-");var a=new c;return a.setNepaliDate(e[0],e[1],e[2]),a.getNepaliDateDifference(t[0],t[1],t[2])}function o(e,t){e=e.split("-"),t=t.split("-");var a=new c;a.setNepaliDate(e[0],e[1],e[2]);var n=[a.getEnglishYear(),a.getEnglishMonth(),a.getEnglishDate()];a.setNepaliDate(t[0],t[1],t[2]);var i=[a.getEnglishYear(),a.getEnglishMonth(),a.getEnglishDate()],s=new Date(n[0],n[1],n[2]),l=new Date(i[0],i[1],i[2]);return s>l&&1}function h(e){e=e.split("-"),year=parseInt(e[0]),month=parseInt(e[1]);var t=parseInt(l(year,month));return day=parseInt(e[2])+1,day>t&&(day=1,month+=1,month>12&&(month=1,year+=1)),year+"-"+month+"-"+day}function r(t,a=!1){var n=N.indexOf(t),i=e('.andp-datepicker-container[data-cal_id="'+m+'"]'),s=i.find('.andp-column .day[data-date="'+t+'"]');a?s.addClass("soft-select"):n<0?(N.push(t),s.addClass("selected")):(N.splice(n,1),s.removeClass("selected"))}function p(e){L.append('<input class="andp-hidden-dates" type="hidden" data-cal_id="'+m+'" name="'+I+'[]" value="'+e+'">')}function c(){this.englishMonths=[31,28,31,30,31,30,31,31,30,31,30,31],this.englishLeapMonths=[31,29,31,30,31,30,31,31,30,31,30,31],this.nepaliMonths=[[30,32,31,32,31,30,30,30,29,30,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[30,32,31,32,31,30,30,30,29,30,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,29,30,30,29,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,29,30,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,29,30,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,30,29,31],[31,31,31,32,31,31,30,29,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,30],[31,32,31,32,31,30,30,30,29,30,29,31],[31,31,31,32,31,31,30,29,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[30,32,31,32,31,30,30,30,29,30,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,31,32,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[30,32,31,32,31,30,30,30,29,30,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[30,32,31,32,31,31,29,30,30,29,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,29,30,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,29,30,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,30,29,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,30],[31,32,31,32,31,30,30,30,29,30,29,31],[31,31,31,32,31,31,30,29,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,30],[31,32,31,32,31,30,30,30,29,30,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,31,32,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[30,32,31,32,31,30,30,30,29,30,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[30,32,31,32,31,31,29,30,29,30,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,29,30,30,29,29,31],[31,31,32,31,31,31,30,29,30,29,30,30],[31,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,29,30,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,31],[31,31,31,32,31,31,30,29,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,30],[31,32,31,32,31,30,30,30,29,30,29,31],[31,31,31,32,31,31,30,29,30,29,30,30],[31,31,32,31,31,31,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,29,30,30],[31,31,32,32,31,30,30,30,29,30,30,30],[30,32,31,32,31,30,30,30,29,30,30,30],[31,31,32,31,31,30,30,30,29,30,30,30],[31,31,32,31,31,30,30,30,29,30,30,30],[31,32,31,32,30,31,30,30,29,30,30,30],[30,32,31,32,31,30,30,30,29,30,30,30],[31,31,32,31,31,31,30,30,29,30,30,30],[30,31,32,32,30,31,30,30,29,30,30,30],[30,32,31,32,31,30,30,30,29,30,30,30],[30,32,31,32,31,30,30,30,29,30,30,30],[31,31,32,31,31,31,30,30,29,30,30,30],[30,31,32,32,31,30,30,30,29,30,30,30],[30,32,31,32,31,30,30,30,29,30,30,30],[31,31,32,31,31,30,30,30,29,30,30,30],[31,31,32,31,31,31,30,29,30,30,30,30],[30,31,32,32,31,30,30,29,30,29,30,30],[31,32,31,32,31,30,30,30,29,30,30,30],[31,31,32,31,31,31,29,30,29,30,29,31],[31,31,32,31,31,31,30,29,29,30,30,30]],this.setCurrentDate=function(){var e=new Date;this.setEnglishDate(e.getFullYear(),e.getMonth()+1,e.getDate())},this.setEnglishDate=function(e,t,a){if(!this.isEnglishRange(e,t,a))throw new Exception("Invalid date format.");this.englishYear=e,this.englishMonth=t,this.englishDate=a,this.nepaliYear=2e3,this.nepaliMonth=1,this.nepaliDate=1;for(var n=this.getEnglishDateDifference(1943,4,14),i=0;n>=this.nepaliYearDays(i);)this.nepaliYear++,n-=this.nepaliYearDays(i),i++;for(var s=0;n>=this.nepaliMonths[i][s];)n-=this.nepaliMonths[i][s],this.nepaliMonth++,s++;this.nepaliDate=this.nepaliDate+n,this.getDay()},this.toEnglishString=function(e){return void 0===e&&(e="-"),this.englishYear+e+this.englishMonth+e+this.englishDate},this.getEnglishDateDifference=function(e,t,a){var n=this.countTotalEnglishDays(this.englishYear,this.englishMonth,this.englishDate)-this.countTotalEnglishDays(e,t,a);return n<0?-n:n},this.countTotalEnglishDays=function(e,t,a){for(var n=365*e+a,i=0;i<t-1;i++)n+=this.englishMonths[i];return n+=this.countleap(e,t),n},this.countleap=function(e,t){return t<=2&&e--,Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400)},this.isEnglishRange=function(e,t,a){return!(e<1944||e>2042)&&(!(t<1||t>12)&&!(a<1||a>31))},this.isLeapYear=function(e){return e%4==0&&(e%100!=0||e%400==0)},this.setNepaliDate=function(e,t,a){if(this.isNepaliRange(e,t,a)){this.nepaliYear=e,this.nepaliMonth=t,this.nepaliDate=a,this.englishYear=1944,this.englishMonth=1,this.englishDate=1;for(var n=this.getNepaliDateDifference(2e3,9,17);n>=(this.isLeapYear(this.englishYear)?366:365);)n-=this.isLeapYear(this.englishYear)?366:365,this.englishYear++;for(var i=this.isLeapYear(this.englishYear)?this.englishLeapMonths:this.englishMonths,s=0;n>=i[s];)this.englishMonth++,n-=i[s],s++;this.englishDate=this.englishDate+n,this.getDay()}else console.log("Invalid Date Format")},this.toNepaliString=function(e){return void 0===e&&(e="-"),this.nepaliYear+e+this.nepaliMonth+e+this.nepaliDate},this.getNepaliDateDifference=function(e,t,a){var n=this.countTotalNepaliDays(this.nepaliYear,this.nepaliMonth,this.nepaliDate)-this.countTotalNepaliDays(e,t,a);return n<0?-n:n},this.countTotalNepaliDays=function(e,t,a){var n=0;if(e<2e3)return 0;n+=a-1;for(var i=e-2e3,s=0;s<t-1;s++)n+=this.nepaliMonths[i][s];for(s=0;s<i;s++)n+=this.nepaliYearDays(s);return n},this.nepaliYearDays=function(e){for(var t=0,a=0;a<12;a++)t+=this.nepaliMonths[e][a];return t},this.isNepaliRange=function(e,t,a){return!(e<2e3||e>2098)&&(!(t<1||t>12)&&!(a<1||a>this.nepaliMonths[e-2e3][t-1]))},this.getDay=function(){var e=this.getEnglishDateDifference(1943,4,14);return this.weekDay=(3+e%7)%7+1,this.weekDay},this.getEnglishYear=function(){return this.englishYear},this.getEnglishMonth=function(){return this.englishMonth},this.getEnglishDate=function(){return this.englishDate},this.getNepaliYear=function(){return this.nepaliYear},this.getNepaliMonth=function(){return this.nepaliMonth},this.getNepaliDate=function(){return this.nepaliDate}}var u=e("body"),_=new c;_.setCurrentDate();let g=_.nepaliYear+"-"+_.nepaliMonth+"-"+_.nepaliDate;e("form").attr("autocomplete","off");var v,f=1,m="",y=_.getNepaliYear(),D=_.getNepaliMonth(),M=2e3,k=2098,Y=0,E="",w="",C="",N=[],b="",I="",x="win",T="",L="";e.fn.nepaliDatePicker=function(t){navigator.platform.toUpperCase().indexOf("MAC")>=0&&(x="mac"),e(this).each(function(){e(this).attr("data-cal_id","cal-"+f),f++,e(this).addClass("andp-date-picker");var t=e(this).val();if(data_single=e(this).data("single"),Y=1==data_single||1==data_single?1:0,t&&!Y){L=e(this).parents("form"),m=e(this).data("cal_id"),I=e(this).attr("name");var a=t.split(",");a.forEach(function(e,t){p(e.trim())}),1!=e(this).data("show_all_dates")&&(a.length>1?output_msg=a.length+" dates selected":output_msg=a[0],e(this).attr("value",output_msg))}}),e(this).click(function(){if(v=this,N=[],T=e(this),data_single=e(this).data("single"),Y=1==data_single||1==data_single?1:0,m=e(this).data("cal_id"),a(this),Y)selected_date=e(this).val(),selected_date.length>0?(older_date_ar=selected_date.split("-"),w.val(older_date_ar[1]).change(),E.val(older_date_ar[0]).change(),r(selected_date)):r(g,!0);else{L=e(this).parents("form"),I=e(this).attr("name"),I?e(this).removeAttr("name","").attr("data-name",I):I=e(this).attr("data-name");var t=e('input.andp-hidden-dates[data-cal_id="'+m+'"]'),n=t.length;n>0?(t.each(function(){selected_date=e(this).val(),r(selected_date)}),1==n?(older_date_ar=selected_date.split("-"),w.val(older_date_ar[1]).change(),E.val(older_date_ar[0]).change()):(older_date=e('input.andp-hidden-dates[data-cal_id="'+m+'"]:last-child').val(),older_date&&older_date.length>0&&(older_date_ar=older_date.split("-"),w.val(older_date_ar[1]).change(),E.val(older_date_ar[0]).change()))):r(g,!0)}}),u.on("change",".andp-month-select, .andp-year-select",function(){s()})},u.on("click",".andp-datepicker-container.open .andp-change-months",function(t){selected_month=parseInt(w.val()),selected_year=parseInt(E.val()),e(this).hasClass("andp-next")?(selected_month+=1,selected_month>12&&(selected_month=1,selected_year+=1,selected_year>k&&(selected_year=k,selected_month=12))):(selected_month-=1,selected_month<1&&(selected_month=12,selected_year-=1,selected_year<M&&(selected_year=M,selected_month=1))),w.val(selected_month).change(),E.val(selected_year).change()}),u.on("click",".andp-datepicker-container.open .andp-days-numbers .day",function(t){selected_day=e(this).text(),selected_date=e(this).data("date");var a=e('.andp-datepicker-container[data-cal_id="'+m+'"]');if(Y)N=[],a.find(".andp-column .day").removeClass("selected"),r(selected_date),a.find(".andp-info").hide();else if(t.shiftKey){var n=N.length;if(n>0){selected_date=e(this).data("date"),b=N[n-1];var s=o(selected_date,b)?b:selected_date,l=s,p=d(selected_date,b);for(N=[],a.find(".andp-column .day").removeClass("selected"),r(l),i=1;i<=p;i++)l=h(l),r(l)}}else t.ctrlKey||t.metaKey?r(selected_date):(N=[],a.find(".andp-column .day").removeClass("selected"),r(selected_date),a.find(".andp-info").show())}),u.on("click",function(t){var a=e(".andp-datepicker-container, .andp-date-picker");a.is(t.target)||0!==a.has(t.target).length||e(".andp-datepicker-container").removeClass("open").hide()}),u.on("click",".andp-datepicker-container.open .apply-date",function(){t()})})(jQuery);